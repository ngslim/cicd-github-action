name: katalon-automate
on:
  push:
    branches: [main]
jobs:
  katalon-automate:
    name: Katalon Automate
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Run test suite
        uses: katalon-studio/katalon-studio-github-action@v3.0
        with:
          version: '7.5.5'
          projectPath: '${{ github.workspace }}'
          args: '-noSplash -retry=0 -browserType="Chrome" -testSuiteCollectionPath="Test Suites/Basic Test Suite" -apiKey= ${{ secrets.API_KEY }} --config -webui.autoUpdateDrivers=true'
      - name: Show Errors on Ubuntu
        if: ${{ failure() && startsWith( matrix.runner, 'ubuntu-')}}
        run: |
          cat /home/runner/.katalon/7.5.5/Katalon_Studio_Engine_Linux_64-7.5.5/configuration/*.log
